!function(n,t){if(!t)return console.error("jQuery required.");var i=n.clbr=n.clbr||{};i.authApi=function(i){return{signup:function(n,e,o){var r={email:n,password:e};t.post(i+"/signup",r).done(function(n){o(null,n)}).fail(function(n,t,i){o(i)})},signin:function(n,e,o){var r={email:n,password:e};t.post(i+"/signin",r).done(function(n){o(null,n)}).fail(function(n,t,i){o(i)})},setRedirect:function(n,e){var o={callbackUri:n};t.post(i+"/social",o).done(function(){e()}).fail(function(n,t,i){e(i)})},facebook:function(){n.location.href=i+"/facebook"},twitter:function(){n.location.href=i+"/twitter"},google:function(){n.location.href=i+"/google"},vk:function(){n.location.href=i+"/vk"},refresh:function(n,e){t.ajax({url:i+"/refresh",type:"GET",headers:{Authorization:"JWT "+n}}).done(function(n){e(null,n)}).fail(function(n,t,i){e(i)})},signout:function(n,e){t.ajax({url:i+"/signout",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){e()}).fail(function(n,t,i){e(i)})},signoutall:function(n,e){t.ajax({url:i+"/signoutall",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){e()}).fail(function(n,t,i){e(i)})},merge:function(n,e,o){t.ajax({url:i+"/merge",type:"POST"}).done(function(){o()}).fail(function(n,t,i){o(i)})},unmerge:function(n,e,o,r){t.ajax({url:i+"/unmerge",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){r()}).fail(function(n,t,i){r(i)})},get:function(n,e){t.ajax({url:i+"/account",type:"GET",headers:{Authorization:"JWT "+n}}).done(function(n){e(null,n)}).fail(function(n,t,i){e(i)})},del:function(n,e){t.ajax({url:i+"/account",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){e()}).fail(function(n,t,i){e(i)})}}}}(window,window.jQuery),function(n,t,i){"use strict";var e=t.module("auth-api",["settings"]);e.factory("authApi",["urls",function(n){return i.authApi(n.authApi)}])}(window,window.angular,window.clbr),function(n,t){"use strict";t.module("directives",[]).directive("cbConfirm",function(){return{restrict:"A",require:"ngModel",link:function(n,t,i,e){var o=function(){var t=n.$eval(i.ngModel),e=n.$eval(i.cbConfirm);return t==e||!t&&!e};n.$watch(o,function(n){e.$setValidity("match",n)})}}})}(window,window.angular),function(n,t){"use strict";var i=t.module("home",["ui.router"]);i.config(["$stateProvider",function(n){n.state("home",{url:"/",templateUrl:"home.html",controller:"HomeCtrl",data:{pageTitle:"Clickberry Video Portal"}})}]),i.controller("HomeCtrl",["$scope","$state",function(n,t){}])}(window,window.angular),function(n,t){"use strict";t.module("settings",[]).constant("urls",{web:"http://192.168.99.100:8081",authApi:"http://auth.qa.clbr.ws"})}(window,window.angular),function(n,t){"use strict";var i=t.module("signin",["ui.router","auth-api","user"]);i.config(["$stateProvider",function(n){n.state("signin",{url:"/signin",templateUrl:"signin.html",controller:"SigninCtrl",data:{pageTitle:"Sign in to Clickberry"}})}]),i.controller("SigninCtrl",["$scope","$state","authApi","user",function(n,t,i,e){n.signin={},n.submit=function(n){i.signin(n.email,n.password,function(n,i){if(n)throw n;e.init(i.accessToken,i.refreshToken),t.go("home")})},n.goFacebook=function(){i.facebook()},n.goTwitter=function(){i.twitter()},n.goGoogle=function(){i.google()},n.goVk=function(){i.vk()}}])}(window,window.angular),function(n,t){"use strict";var i=t.module("signup",["ui.router","auth-api"]);i.config(["$stateProvider",function(n){n.state("signup",{url:"/signup",templateUrl:"signup.html",controller:"SignupCtrl",data:{pageTitle:"Sign up on Clickberry"}})}]),i.controller("SignupCtrl",["$scope","$state","authApi",function(n,t,i){n.signup={},n.submit=function(n){i.signup(n.email,n.password,function(n,i){return n?alert("Error: "+n.message):(alert("Ok: "+JSON.stringify(i)),void t.go("home"))})},n.goFacebook=function(){i.facebook()},n.goTwitter=function(){i.twitter()},n.goGoogle=function(){i.google()},n.goVk=function(){i.vk()}}])}(window,window.angular),function(n,t){"use strict";var i=t.module("user",["auth-api","settings"]);i.factory("user",["$interval","authApi","urls",function(n,i,e){var o,r={id:void 0,email:void 0,accessToken:void 0,refreshToken:void 0};return i.setRedirect(e.web,function(){}),{init:function(t,e){var r=this;r.accessToken=t,r.refreshToken=e,i.get(t,function(n,t){if(n)throw n;r.id=t.id,r.email=t.email}),o=n(function(){i.refresh(e,function(n,t){if(n)throw n;r.accessToken=t.accessToken,r.refreshToken=t.refreshToken})},6e4)},destroy:function(){n.cancel(o),t.extend(this,r)}}}])}(window,window.angular),function(n,t){"use strict";var i=t.module("clbr",["ui.router","ngMaterial","home","signup","signin","directives"]);i.config(["$urlRouterProvider","$locationProvider","$stateProvider","$mdThemingProvider",function(n,t,i,e){i.state("clbr",{"abstract":!0,template:"<div ui-view></div>"}),n.otherwise("/"),e.theme("default").primaryPalette("grey").accentPalette("green",{"default":"500","hue-1":"200","hue-2":"700","hue-3":"A200"})}]),i.controller("ClickberryCtrl",["$rootScope","$state",function(n,i){n.pageTitle="Clickberry Video Portal",n.$on("$stateChangeSuccess",function(i,e){t.isDefined(e.data)&&t.isDefined(e.data.pageTitle)&&(n.pageTitle=e.data.pageTitle)}),n.menuExpanded=!1,n.expandMenu=function(){n.menuExpanded=!n.menuExpanded},n.signup=function(){i.go("signup")},n.signin=function(){i.go("signin")}}])}(window,window.angular);
//# sourceMappingURL=../maps/clbr.min.js.map
