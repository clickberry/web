!function(n,e){if(!e)return console.error("jQuery required.");var o=n.clbr=n.clbr||{};o.authApi=function(o){return{signup:function(n,i,t){var r={email:n,password:i};e.post(o+"/signup",r).done(function(n){t(null,n)}).fail(function(n,e,o){t(o)})},signin:function(n,i,t){var r={email:n,password:i};e.post(o+"/signin",r).done(function(n){t(null,n)}).fail(function(n,e,o){t(o)})},setRedirect:function(n,i){var t={callbackUri:n};e.ajax({url:o+"/social",type:"POST",data:t,xhrFields:{withCredentials:!0}}).done(function(){i()}).fail(function(n,e,o){i(o)})},facebook:function(){n.location.href=o+"/facebook"},twitter:function(){n.location.href=o+"/twitter"},google:function(){n.location.href=o+"/google"},vk:function(){n.location.href=o+"/vk"},refresh:function(n,i){e.ajax({url:o+"/refresh",type:"GET",headers:{Authorization:"JWT "+n}}).done(function(n){i(null,n)}).fail(function(n,e,o){i(o)})},signout:function(n,i){e.ajax({url:o+"/signout",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){i()}).fail(function(n,e,o){i(o)})},signoutall:function(n,i){e.ajax({url:o+"/signoutall",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){i()}).fail(function(n,e,o){i(o)})},merge:function(n,i,t){e.ajax({url:o+"/merge",type:"POST"}).done(function(){t()}).fail(function(n,e,o){t(o)})},unmerge:function(n,i,t,r){e.ajax({url:o+"/unmerge",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){r()}).fail(function(n,e,o){r(o)})},get:function(n,i){e.ajax({url:o+"/account",type:"GET",headers:{Authorization:"JWT "+n}}).done(function(n){i(null,n)}).fail(function(n,e,o){i(o)})},del:function(n,i){e.ajax({url:o+"/account",type:"DELETE",headers:{Authorization:"JWT "+n}}).done(function(){i()}).fail(function(n,e,o){i(o)})}}}}(window,window.jQuery),function(n,e){if(!e)return console.error("jQuery required.");var o=n.clbr=n.clbr||{};o.profilesApi=function(n){return{get:function(o,i,t){e.ajax({url:n+"/"+o,type:"GET",headers:{Authorization:"JWT "+i}}).done(function(n){t(null,n)}).fail(function(n,e,o){t(o)})},"public":function(o,i,t){e.ajax({url:n+"/public/"+o,type:"GET",headers:{Authorization:"JWT "+i}}).done(function(n){t(null,n)}).fail(function(n,e,o){t(o)})},update:function(o,i,t,r,u){var a={email:i,name:t};e.ajax({url:n+"/"+o,type:"PUT",headers:{Authorization:"JWT "+r},data:a}).done(function(n){u(null,n)}).fail(function(n,e,o){u(o)})}}}}(window,window.jQuery),function(n,e){if(!e)return console.error("jQuery required.");var o=n.clbr=n.clbr||{};o.projectsApi=function(n){return{get:function(o,i,t){t||(t=i,i=null);var r={};i&&(r.Authorization="JWT "+i),e.ajax({url:n+"/"+o,type:"GET",headers:r}).done(function(n){t(null,n)}).fail(function(n,e,o){t(o)})},listMy:function(o,i){e.ajax({url:n,type:"GET",headers:{Authorization:"JWT "+o}}).done(function(n){i(null,n)}).fail(function(n,e,o){i(o)})},listPublic:function(o,i,t){t||(t=i,i=null),i=i||"",e.ajax({url:n+"/all?top="+o+"&last="+i,type:"GET"}).done(function(n){t(null,n)}).fail(function(n,e,o){t(o)})},save:function(o,i,t){e.ajax({url:n+"/"+id,type:"POST",headers:{Authorization:"JWT "+i},data:o}).done(function(n){t(null,n)}).fail(function(n,e,o){t(o)})},update:function(o,i,t,r){e.ajax({url:n+"/"+o,type:"PUT",headers:{Authorization:"JWT "+t},data:i}).done(function(n){r(null,n)}).fail(function(n,e,o){r(o)})}}}}(window,window.jQuery),function(n,e,o){"use strict";var i=e.module("auth-api",["settings"]);i.factory("authApi",["urls",function(n){return o.authApi(n.authApi)}])}(window,window.angular,window.clbr),function(n,e){"use strict";e.module("constants",[]).constant("events",{login:"login",logout:"logout"})}(window,window.angular),function(n,e){"use strict";var o=e.module("directives",["menu"]);o.directive("cbConfirm",function(){return{restrict:"A",require:"ngModel",link:function(n,e,o,i){var t=function(){var e=n.$eval(o.ngModel),i=n.$eval(o.cbConfirm);return e==i||!e&&!i};n.$watch(t,function(n){i.$setValidity("match",n)})}}})}(window,window.angular),function(n,e){"use strict";var o=e.module("exceptions",[]);o.factory("$exceptionHandler",[function(){return function(n){var e=n.message;e&&"[object Object]"!==e||(e="Application Error"),alert(e)}}])}(window,window.angular),function(n,e){"use strict";var o=e.module("home",["ui.router"]);o.config(["$stateProvider",function(n){n.state("home",{url:"/",templateUrl:"home.html",controller:"HomeCtrl",data:{pageTitle:"Clickberry Video Portal"}})}]),o.controller("HomeCtrl",["$scope","$state",function(n,e){}])}(window,window.angular),function(n,e){"use strict";var o=e.module("menu",["user","constants"]);o.directive("cbMenu",["$state","events","user",function(n,e,o){return{restrict:"EA",replace:!0,templateUrl:"menu.html",link:function(i){i.menuExpanded=!1,i.expandMenu=function(){i.menuExpanded=!i.menuExpanded},i.user=null,i.$on(e.login,function(n,e){i.user=e,i.$digest()}),i.$on(e.logout,function(){i.user=null,n.go("home")}),i.signoff=function(){o.destroy()},i.signup=function(){n.go("signup")},i.signin=function(){n.go("signin")},i.profile=function(){n.go("profile")}}}}])}(window,window.angular),function(n,e){"use strict";var o=e.module("profile",["ui.router","profiles-api","user"]);o.config(["$stateProvider",function(n){n.state("profile",{url:"/profile",templateUrl:"profile.html",controller:"ProfileCtrl",data:{pageTitle:"Your Profile on Clickberry"}})}]),o.controller("ProfileCtrl",["$scope","$state","profilesApi","user",function(n,e,o,i){n.profile={},n.loading=!1,n.submit=function(e){n.loading=!0,o.update(i.id,e.email,e.name,i.accessToken,function(e){if(e)throw e;n.loading=!1,n.$digest()})},function(){n.loading=!0,o.get(i.id,i.accessToken,function(e,o){if(e)throw e;n.profile=o,n.loading=!1,n.$digest()})}()}])}(window,window.angular),function(n,e,o){"use strict";var i=e.module("profiles-api",["settings"]);i.factory("profilesApi",["urls",function(n){return o.profilesApi(n.profilesApi)}])}(window,window.angular,window.clbr),function(n,e,o){"use strict";var i=e.module("projects-api",["settings"]);i.factory("projectsApi",["urls",function(n){return o.projectsApi(n.projectsApi)}])}(window,window.angular,window.clbr),function(n,e){"use strict";e.module("settings",[]).constant("urls",{authApi:"http://auth.qa.clbr.ws",profilesApi:"http://profiles.qa.clbr.ws",projectsApi:"http://projects.qa.clbr.ws"})}(window,window.angular),function(n,e){"use strict";var o=e.module("signin",["ui.router","auth-api","user"]);o.config(["$stateProvider",function(n){n.state("signin",{url:"/signin",templateUrl:"signin.html",controller:"SigninCtrl",data:{pageTitle:"Sign in to Clickberry"}})}]),o.controller("SigninCtrl",["$scope","$state","authApi","user",function(n,e,o,i){n.signin={},n.loading=!1,n.submit=function(t){n.loading=!0,o.signin(t.email,t.password,function(o,t){if(o)throw o;i.init(t.accessToken,t.refreshToken),n.loading=!1,e.go("home")})},n.goFacebook=function(){n.loading=!0,o.facebook()},n.goTwitter=function(){n.loading=!0,o.twitter()},n.goGoogle=function(){n.loading=!0,o.google()},n.goVk=function(){n.loading=!0,o.vk()}}])}(window,window.angular),function(n,e){"use strict";var o=e.module("signup",["ui.router","auth-api"]);o.config(["$stateProvider",function(n){n.state("signup",{url:"/signup",templateUrl:"signup.html",controller:"SignupCtrl",data:{pageTitle:"Sign up on Clickberry"}})}]),o.controller("SignupCtrl",["$scope","$state","authApi",function(n,e,o){n.signup={},n.loading=!1,n.submit=function(i){n.loading=!0,o.signup(i.email,i.password,function(o,i){return o?alert("Error: "+o.message):(n.loading=!1,void e.go("home"))})},n.goFacebook=function(){n.loading=!0,o.facebook()},n.goTwitter=function(){n.loading=!0,o.twitter()},n.goGoogle=function(){n.loading=!0,o.google()},n.goVk=function(){n.loading=!0,o.vk()}}])}(window,window.angular),function(n,e){"use strict";var o=e.module("user",["auth-api","constants","ngCookies"]);o.factory("user",["$rootScope","$interval","$location","$window","$cookies","authApi","events",function(n,o,i,t,r,u,a){function c(e){n.$broadcast(a.login,e)}function l(){n.$broadcast(a.logout)}function s(){if(v.accessToken&&v.refreshToken){var n=new t.Date,e=new t.Date(n.getFullYear(),n.getMonth()+1,n.getDate()),o={accessToken:v.accessToken,refreshToken:v.refreshToken};r.putObject(T,o,{expires:e})}}function f(){return r.getObject(T)}function d(){u.refresh(v.refreshToken,function(n,e){if(n)throw n;v.accessToken=e.accessToken,v.refreshToken=e.refreshToken})}function g(){var n=i.search();return n.access_token&&n.refresh_token?{accessToken:v.access_token,refreshToken:v.refresh_token}:void 0}function p(){var n=i.protocol()+"://"+i.host()+":"+i.port()+"/#/";u.setRedirect(n,function(){})}function w(n,e){v.accessToken=n,v.refreshToken=e,u.get(n,function(n,e){if(n)throw n;if(v.id=e.id,v.email=e.email,!v.email&&e.memberships){var o;for(o=0;o<e.memberships.length;++o)if(e.memberships[o].email){v.email=e.memberships[o].email;break}}c({id:v.id,email:v.email}),s()}),m=o(function(){d()},6e4)}function h(){o.cancel(m),e.extend(v,k),l()}var m,T="tokens",v={},k={id:void 0,email:void 0,accessToken:void 0,refreshToken:void 0};return function(){p();var n=g();return n?w(n.accessToken,n.refreshToken):(n=f(),n?w(n.accessToken,n.refreshToken):void 0)}(),v.init=w,v.destroy=h,v}])}(window,window.angular),function(n,e){"use strict";var o=e.module("clbr",["ui.router","ngMaterial","home","signup","signin","profile","directives","user","exceptions"]);o.config(["$urlRouterProvider","$locationProvider","$stateProvider","$mdThemingProvider",function(n,e,o,i){o.state("clbr",{"abstract":!0,template:"<div ui-view></div>"}),n.otherwise("/"),i.theme("default").primaryPalette("grey").accentPalette("green",{"default":"500","hue-1":"200","hue-2":"700","hue-3":"A200"})}]),o.controller("ClickberryCtrl",["$rootScope",function(n){n.pageTitle="Clickberry Video Portal",n.$on("$stateChangeSuccess",function(o,i){e.isDefined(i.data)&&e.isDefined(i.data.pageTitle)&&(n.pageTitle=i.data.pageTitle)})}])}(window,window.angular);
//# sourceMappingURL=../maps/clbr.min.js.map
