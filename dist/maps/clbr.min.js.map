{"version":3,"sources":["clbr.js"],"names":["window","$","console","error","clbr","authApi","url","signup","email","password","fn","data","post","done","result","fail","jqXHR","textStatus","err","signin","setRedirect","redirect_url","callbackUri","facebook","location","href","twitter","google","vk","refresh","refreshToken","ajax","type","headers","Authorization","signout","signoutall","merge","access_token1","access_token2","unmerge","access_token","provider","id","get","del","jQuery","angular","module","factory","urls","constant","login","logout","directive","restrict","require","link","scope","elem","attrs","control","checker","e1","$eval","ngModel","e2","cbConfirm","$watch","value","$setValidity","config","$stateProvider","state","templateUrl","controller","pageTitle","$scope","$state","events","user","replace","menuExpanded","expandMenu","signoff","destroy","$on","event","$digest","web","submit","params","init","accessToken","go","goFacebook","goTwitter","goGoogle","goVk","alert","message","JSON","stringify","$rootScope","$interval","emitLoginEvent","$broadcast","emitLogoutEvent","self","this","intervalId","cancel","extend","fields","undefined","app","$urlRouterProvider","$locationProvider","$mdThemingProvider","abstract","template","otherwise","theme","primaryPalette","accentPalette","default","hue-1","hue-2","hue-3","toState","isDefined"],"mappings":"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","file":"clbr.min.js","sourcesContent":["(function(window, $) {\n  \n  if (!$) {\n    return console.error('jQuery required.');\n  }\n\n  var clbr = window.clbr = window.clbr || {};\n\n  clbr.authApi = function (url) {\n    return {\n      // Sign up by email and password\n      signup: function (email, password, fn) {\n        var data = {\n          email: email,\n          password: password\n        };\n\n        $.post(url + '/signup', data)\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Sign in by email and password\n      signin: function (email, password, fn) {\n        var data = {\n          email: email,\n          password: password\n        };\n\n        $.post(url + '/signin', data)\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Sets redirect url after social registrations\n      setRedirect: function (redirect_url, fn) {\n        var data = {\n          callbackUri: redirect_url\n        };\n\n        $.post(url + '/social', data)\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Registration/login via Facebook\n      facebook: function () {\n        window.location.href = url + '/facebook';\n      },\n\n      // Registration/login via Twitter\n      twitter: function () {\n        window.location.href = url + '/twitter';\n      },\n\n      // Registration/login via Google\n      google: function () {\n        window.location.href = url + '/google';\n      },\n\n      // Registration/login via Vk\n      vk: function () {\n        window.location.href = url + '/vk';\n      },\n\n      // Updates access & refresh tokens\n      refresh: function (refreshToken, fn) {\n        $.ajax({\n            url: url + '/refresh',\n            type: 'GET',\n            headers: {'Authorization': 'JWT ' + refreshToken}\n          })\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Signs out current user\n      signout: function (refreshToken, fn) {\n        $.ajax({\n            url: url + '/signout',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + refreshToken}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Deletes all sessions for current user\n      signoutall: function (refreshToken, fn) {\n        $.ajax({\n            url: url + '/signoutall',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + refreshToken}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Merges two accaunts\n      merge: function (access_token1, access_token2, fn) {\n        var data = {\n          token1: access_token1,\n          token2: access_token2\n        };\n\n        $.ajax({\n            url: url + '/merge',\n            type: 'POST'\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Unmerges social account\n      unmerge: function (access_token, provider, id, fn) {\n        var data = {\n          provider: provider,\n          id: id\n        };\n\n        $.ajax({\n            url: url + '/unmerge',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + access_token}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Gets user info\n      get: function (access_token, fn) {\n        $.ajax({\n            url: url + '/account',\n            type: 'GET',\n            headers: {'Authorization': 'JWT ' + access_token}\n          })\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Deletes user account\n      del: function (access_token, fn) {\n        $.ajax({\n            url: url + '/account',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + access_token}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      }\n    };\n  };\n\n})(window, window.jQuery);\n(function(window, angular, clbr) {\n  \"use strict\";\n\n  var module = angular.module('auth-api', ['settings']);\n\n  module.factory('authApi', [\n    'urls', function (urls) {\n      return clbr.authApi(urls.authApi);\n    }\n  ]);  \n    \n})(window, window.angular, window.clbr);\n(function(window, angular) {\n    \"use strict\";\n\n    angular.module('constants', []) \n      .constant('events', {\n      \t'login': 'login',\n        'logout': 'logout'\n      });\n    \n})(window, window.angular);\n(function(window, angular) {\n    \"use strict\";\n    \n    var module = angular.module('directives', ['menu']);\n\n    // input confirmation (e.g. passwords match)\n    module.directive('cbConfirm', function() {\n        return {\n          restrict: 'A',\n          require: 'ngModel',\n          link: function(scope, elem, attrs, control) {\n            var checker = function() {\n              var e1 = scope.$eval(attrs.ngModel);\n              var e2 = scope.$eval(attrs.cbConfirm);\n              return e1 == e2 || (!e1 && !e2);\n            };\n            scope.$watch(checker, function(value) {\n              // set the form control to valid if both \n              // inputs are the same, else invalid\n              control.$setValidity(\"match\", value);\n            });\n          }\n        };\n    });\n    \n})(window, window.angular);\n(function(window, angular) {\n    \"use strict\";\n\n    var module = angular.module('home', [\n      'ui.router'\n    ]);\n\n    // Routes\n    module.config([\n      '$stateProvider', function ($stateProvider) {\n        $stateProvider\n          .state('home', {\n            url: '/',\n            templateUrl: 'home.html',\n            controller: 'HomeCtrl',\n            data: {\n              pageTitle: 'Clickberry Video Portal'\n            }\n          });\n        }\n    ]);\n\n    // Controllers\n    module.controller('HomeCtrl', [\n      '$scope', '$state',\n      function ($scope, $state) {\n\n        \n        \n      }\n    ]);\n    \n})(window, window.angular);\n(function (window, angular) {\n    \"use strict\";\n\n    var module = angular.module('menu', ['user', 'constants']);\n\n    module.directive('cbMenu', [\n        'events', 'user', function (events, user) {\n          return {\n            restrict: 'EA',\n            replace: true,\n            templateUrl: 'menu.html',\n            link: function($scope) {\n              $scope.menuExpanded = false;\n              $scope.expandMenu = function() {\n                $scope.menuExpanded = !$scope.menuExpanded;\n              };\n\n              $scope.signoff = function () {\n                user.destroy();\n              };\n\n              $scope.user = null;\n              $scope.$on(events.login, function (event, data) {\n                $scope.user = data;\n                $scope.$digest();\n              });\n              $scope.$on(events.logout, function () {\n                $scope.user = null;\n              });\n            }\n          };\n        }\n    ])\n\n})(window, window.angular);\n(function(window, angular) {\n    \"use strict\";\n\n    angular.module('settings', []) \n      .constant('urls', {\n      \t'web': 'http://192.168.99.100:8081',\n        'authApi': 'http://auth.qa.clbr.ws'\n      });\n    \n})(window, window.angular);\n(function (window, angular) {\n    \"use strict\";\n\n    var module = angular.module('signin', [\n      'ui.router',\n      'auth-api',\n      'user'\n    ]);\n\n    // Routes\n    module.config([\n      '$stateProvider', function ($stateProvider) {\n        $stateProvider\n          .state('signin', {\n            url: '/signin',\n            templateUrl: 'signin.html',\n            controller: 'SigninCtrl',\n            data: {\n              pageTitle: 'Sign in to Clickberry'\n            }\n          });\n        }\n    ]);\n\n    // Controllers\n    module.controller('SigninCtrl', [\n      '$scope', '$state', 'authApi', 'user',\n      function ($scope, $state, authApi, user) {\n\n        $scope.signin = {};\n\n        $scope.submit = function (params) {\n          authApi.signin(params.email, params.password, function (err, data) {\n            if (err) { throw err; }\n            user.init(data.accessToken, data.refreshToken);\n            $state.go('home');\n          });\n        };\n\n        $scope.goFacebook = function () {\n          authApi.facebook();\n        };\n\n        $scope.goTwitter = function () {\n          authApi.twitter();\n        };\n\n        $scope.goGoogle = function () {\n          authApi.google();\n        };\n\n        $scope.goVk = function () {\n          authApi.vk();\n        };\n      }\n    ]);\n})(window, window.angular);\n(function (window, angular) {\n    \"use strict\";\n\n    var module = angular.module('signup', [\n      'ui.router',\n      'auth-api'\n    ]);\n\n    // Routes\n    module.config([\n      '$stateProvider', function ($stateProvider) {\n        $stateProvider\n          .state('signup', {\n            url: '/signup',\n            templateUrl: 'signup.html',\n            controller: 'SignupCtrl',\n            data: {\n              pageTitle: 'Sign up on Clickberry'\n            }\n          });\n        }\n    ]);\n\n    // Controllers\n    module.controller('SignupCtrl', [\n      '$scope', '$state', 'authApi',\n      function ($scope, $state, authApi) {\n\n        $scope.signup = {};\n\n        $scope.submit = function (params) {\n          authApi.signup(params.email, params.password, function (err, data) {\n            if (err) { return alert('Error: ' + err.message); }\n            alert('Ok: ' + JSON.stringify(data));\n            $state.go('home');\n          });\n        };\n\n        $scope.goFacebook = function () {\n          authApi.facebook();\n        };\n\n        $scope.goTwitter = function () {\n          authApi.twitter();\n        };\n\n        $scope.goGoogle = function () {\n          authApi.google();\n        };\n\n        $scope.goVk = function () {\n          authApi.vk();\n        };\n      }\n    ]);\n})(window, window.angular);\n(function (window, angular) {\n    \"use strict\";\n\n    var module = angular.module('user', ['auth-api', 'settings', 'constants']);\n\n    module.factory('user', [\n      '$rootScope', '$interval', 'authApi', 'urls', 'events', \n        function ($rootScope, $interval, authApi, urls, events) {\n          var intervalId;\n\n          var fields = {\n            id: undefined,\n            email: undefined,\n            accessToken: undefined,\n            refreshToken: undefined\n          };\n\n          // set social callback\n          authApi.setRedirect(urls.web, function () {});\n\n          function emitLoginEvent(data) {\n            $rootScope.$broadcast(events.login, data);\n          }\n\n          function emitLogoutEvent() {\n            $rootScope.$broadcast(events.logout);\n          }\n\n          // inits a user account\n          function init (accessToken, refreshToken) {\n            var self = this;\n\n            self.accessToken = accessToken;\n            self.refreshToken = refreshToken;\n\n            // gets user account info\n            authApi.get(accessToken, function (err, data) {\n              if (err) { throw err; }\n              self.id = data.id;\n              self.email = data.email;\n              emitLoginEvent({id: data.id, email: data.email});\n            });\n\n            // sets the interval to refresh token\n            intervalId = $interval(function() {\n              authApi.refresh(refreshToken, function (err, data) {\n                if (err) { throw err; }\n                self.accessToken = data.accessToken;\n                self.refreshToken = data.refreshToken;\n              });\n            }, 60000);\n          }\n\n          // destroys the account\n          function destroy () {\n            $interval.cancel(intervalId);\n            angular.extend(this, fields);\n            emitLogoutEvent();\n          }\n\n          return {\n            init: init,\n            destroy: destroy\n          };\n    }\n  ]);\n\n})(window, window.angular);\n(function (window, angular) {\n    'use strict';\n\n    var app = angular.module('clbr', [\n      'ui.router', // for ui routing\n      'ngMaterial', // activate material design\n      'home',\n      'signup',\n      'signin',\n      'directives'\n    ]);\n\n    // Config\n    app.config([\n      '$urlRouterProvider', '$locationProvider', '$stateProvider', '$mdThemingProvider',\n      function ($urlRouterProvider, $locationProvider, $stateProvider, $mdThemingProvider) {\n        \n        // routes\n        $stateProvider\n          .state('clbr', {\n            'abstract': true,\n            template: '<div ui-view></div>'\n          });\n\n        // html5 routing without #\n        $urlRouterProvider.otherwise('/');\n        // $locationProvider.html5Mode(true);\n\n        // theme\n        $mdThemingProvider.theme('default')\n          .primaryPalette('grey')\n          .accentPalette('green', {\n            'default': '500',\n            'hue-1': '200',\n            'hue-2': '700',\n            'hue-3': 'A200'\n          });\n      }\n    ]);\n\n    // Main application controller\n    app.controller('ClickberryCtrl', [\n      '$rootScope', '$state',\n      function ($rootScope, $state) {\n\n        $rootScope.pageTitle = 'Clickberry Video Portal';\n        $rootScope.$on('$stateChangeSuccess', function (event, toState/*, toParams, from, fromParams*/) {\n          if (angular.isDefined(toState.data) && angular.isDefined(toState.data.pageTitle)) {\n            $rootScope.pageTitle = toState.data.pageTitle;\n          }\n        });\n\n        $rootScope.signup = function () {\n          $state.go('signup');\n        };\n\n        $rootScope.signin = function () {\n          $state.go('signin');\n        };\n      }\n    ]);\n\n})(window, window.angular);"],"sourceRoot":"/source/"}