{"version":3,"sources":["clbr.js"],"names":["window","$","console","error","clbr","authApi","url","signup","email","password","fn","data","post","done","result","fail","jqXHR","textStatus","err","setRedirect","redirect_url","ajax","type","facebook","location","href","twitter","vk","refresh","refreshToken","headers","Authorization","signout","signoutall","merge","access_token1","access_token2","unmerge","access_token","provider","id","get","del","jQuery","angular","module","factory","urls","constant","app","config","$urlRouterProvider","$locationProvider","$stateProvider","$mdThemingProvider","state","abstract","template","otherwise","html5Mode","theme","primaryPalette","accentPalette","default","hue-1","hue-2","hue-3","controller","$rootScope","authService","$on","event","toState","isDefined","pageTitle","menuExpanded","expandMenu","test"],"mappings":"CAAA,SAAUA,EAAQC,GAEhB,IAAKA,EACH,MAAOC,SAAQC,MAAM,mBAGvB,IAAIC,GAAOJ,EAAOI,KAAOJ,EAAOI,QAEhCA,GAAKC,QAAU,SAAUC,GACvB,OAEEC,OAAQ,SAAUC,EAAOC,EAAUC,GACjC,GAAIC,IACFH,MAAOA,EACPC,SAAUA,EAGZR,GAAEW,KAAKN,EAAM,UAAWK,GACrBE,KAAK,SAASC,GACbJ,EAAG,KAAMI,KAEVC,KAAK,SAASC,EAAOC,EAAYC,GAChCR,EAAGQ,MAKTC,YAAa,SAAUC,GAKrBnB,EAAEoB,MACEf,IAAKA,EAAM,UACXgB,KAAM,SAEPT,KAAK,SAASC,GACbJ,GAAG,KAAMI,KAEVC,KAAK,SAASC,EAAOC,EAAYC,GAChCR,GAAGQ,MAKTK,SAAU,WACRvB,EAAOwB,SAASC,KAAOnB,EAAM,aAI/BoB,QAAS,WACP1B,EAAOwB,SAASC,KAAOnB,EAAM,YAI/BoB,QAAS,WACP1B,EAAOwB,SAASC,KAAOnB,EAAM,WAI/BqB,GAAI,WACF3B,EAAOwB,SAASC,KAAOnB,EAAM,OAI/BsB,QAAS,SAAUC,EAAcnB,GAC/BT,EAAEoB,MACEf,IAAKA,EAAM,WACXgB,KAAM,MACNQ,SAAUC,cAAiB,OAASF,KAErChB,KAAK,SAASC,GACbJ,EAAG,KAAMI,KAEVC,KAAK,SAASC,EAAOC,EAAYC,GAChCR,EAAGQ,MAKTc,QAAS,SAAUH,EAAcnB,GAC/BT,EAAEoB,MACEf,IAAKA,EAAM,WACXgB,KAAM,SACNQ,SAAUC,cAAiB,OAASF,KAErChB,KAAK,WACJH,MAEDK,KAAK,SAASC,EAAOC,EAAYC,GAChCR,EAAGQ,MAKTe,WAAY,SAAUJ,EAAcnB,GAClCT,EAAEoB,MACEf,IAAKA,EAAM,cACXgB,KAAM,SACNQ,SAAUC,cAAiB,OAASF,KAErChB,KAAK,WACJH,MAEDK,KAAK,SAASC,EAAOC,EAAYC,GAChCR,EAAGQ,MAKTgB,MAAO,SAAUC,EAAeC,GAM9BnC,EAAEoB,MACEf,IAAKA,EAAM,SACXgB,KAAM,SAEPT,KAAK,WACJH,OAEDK,KAAK,SAASC,EAAOC,EAAYC,GAChCR,GAAGQ,MAKTmB,QAAS,SAAUC,EAAcC,EAAUC,GAMzCvC,EAAEoB,MACEf,IAAKA,EAAM,WACXgB,KAAM,SACNQ,SAAUC,cAAiB,OAASO,KAErCzB,KAAK,WACJH,OAEDK,KAAK,SAASC,EAAOC,EAAYC,GAChCR,GAAGQ,MAKTuB,IAAK,SAAUH,GACbrC,EAAEoB,MACEf,IAAKA,EAAM,WACXgB,KAAM,MACNQ,SAAUC,cAAiB,OAASO,KAErCzB,KAAK,SAASC,GACbJ,GAAG,KAAMI,KAEVC,KAAK,SAASC,EAAOC,EAAYC,GAChCR,GAAGQ,MAKTwB,IAAK,SAAUJ,GACbrC,EAAEoB,MACEf,IAAKA,EAAM,WACXgB,KAAM,SACNQ,SAAUC,cAAiB,OAASO,KAErCzB,KAAK,WACJH,OAEDK,KAAK,SAASC,EAAOC,EAAYC,GAChCR,GAAGQ,SAMZlB,OAAQA,OAAO2C,QAClB,SAAU3C,EAAQ4C,EAASxC,GACvB,YAEA,IAAIyC,GAASD,EAAQC,OAAO,YAAa,aAEzCA,GAAOC,QAAQ,eACX,OAAQ,SAAUC,GACd,MAAO3C,GAAKC,QAAQ0C,EAAK1C,aAIlCL,OAAQA,OAAO4C,QAAS5C,OAAOI,MAClC,SAAWJ,EAAQ4C,GACf,YAGAA,GAAQC,OAAO,gBACZG,SAAS,SAAUhD,EAAOC,GAC1B+C,SAAS,QACR3C,QAAW,0BAGf,IAAI4C,GAAML,EAAQC,OAAO,QACvB,YACA,YACA,aACA,YAIFI,GAAIC,QACF,qBAAsB,oBAAqB,iBAAkB,qBAC7D,SAAUC,EAAoBC,EAAmBC,EAAgBC,GAE/DD,EACGE,MAAM,QACLC,YAAY,EACZC,SAAU,wBAIdN,EAAmBO,UAAU,KAC7BN,EAAkBO,WAAU,GAG5BL,EAAmBM,MAAM,WACtBC,eAAe,QACfC,cAAc,SACbC,UAAW,MACXC,QAAS,MACTC,QAAS,MACTC,QAAS,YAMjBjB,EAAIkB,WAAW,kBACb,aAAc,cACd,SAAUC,EAAYC,GACpBD,EAAWE,IAAI,sBAAuB,SAAUC,EAAOC,GACjD5B,EAAQ6B,UAAUD,EAAQ7D,OAASiC,EAAQ6B,UAAUD,EAAQ7D,KAAK+D,aACpEN,EAAWM,UAAYF,EAAQ7D,KAAK+D,aAIxCN,EAAWO,cAAe,EAC1BP,EAAWQ,WAAa,WACtBR,EAAWO,cAAgBP,EAAWO,cAGxCP,EAAWS,KAAO,WAChBR,EAAY9C,gBAKnBvB,OAAQA,OAAO4C","file":"clbr.min.js","sourcesContent":["(function(window, $) {\n  \n  if (!$) {\n    return console.error('jQuery required.');\n  }\n\n  var clbr = window.clbr = window.clbr || {};\n\n  clbr.authApi = function (url) {\n    return {\n      // Sign up by email and password\n      signup: function (email, password, fn) {\n        var data = {\n          email: email,\n          password: password\n        };\n\n        $.post(url + '/signup', data)\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Sets redirect url after social registrations\n      setRedirect: function (redirect_url) {\n        var data = {\n          callbackUri: redirect_url\n        };\n\n        $.ajax({\n            url: url + '/social',\n            type: 'POST'\n          })\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Registration/login via Facebook\n      facebook: function () {\n        window.location.href = url + '/facebook';\n      },\n\n      // Registration/login via Twitter\n      twitter: function () {\n        window.location.href = url + '/twitter';\n      },\n\n      // Registration/login via Google\n      twitter: function () {\n        window.location.href = url + '/google';\n      },\n\n      // Registration/login via Vk\n      vk: function () {\n        window.location.href = url + '/vk';\n      },\n\n      // Updates access & refresh tokens\n      refresh: function (refreshToken, fn) {\n        $.ajax({\n            url: url + '/refresh',\n            type: 'GET',\n            headers: {'Authorization': 'JWT ' + refreshToken}\n          })\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Signs out current user\n      signout: function (refreshToken, fn) {\n        $.ajax({\n            url: url + '/signout',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + refreshToken}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Deletes all sessions for current user\n      signoutall: function (refreshToken, fn) {\n        $.ajax({\n            url: url + '/signoutall',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + refreshToken}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Merges two accaunts\n      merge: function (access_token1, access_token2) {\n        var data = {\n          token1: access_token1,\n          token2: access_token2\n        };\n\n        $.ajax({\n            url: url + '/merge',\n            type: 'POST'\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Unmerges social account\n      unmerge: function (access_token, provider, id) {\n        var data = {\n          provider: provider,\n          id: id\n        };\n\n        $.ajax({\n            url: url + '/unmerge',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + access_token}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Gets user info\n      get: function (access_token) {\n        $.ajax({\n            url: url + '/account',\n            type: 'GET',\n            headers: {'Authorization': 'JWT ' + access_token}\n          })\n          .done(function(result) {\n            fn(null, result);\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      },\n\n      // Deletes user account\n      del: function (access_token) {\n        $.ajax({\n            url: url + '/account',\n            type: 'DELETE',\n            headers: {'Authorization': 'JWT ' + access_token}\n          })\n          .done(function() {\n            fn();\n          })\n          .fail(function(jqXHR, textStatus, err) {\n            fn(err);\n          });\n      }\n    };\n  };\n\n})(window, window.jQuery);\n(function(window, angular, clbr) {\n    \"use strict\";\n\n    var module = angular.module('auth-api', ['constants']);\n\n    module.factory('authService', [\n        'urls', function (urls) {\n            return clbr.authApi(urls.authApi);\n        }\n    ]);\n    \n})(window, window.angular, window.clbr);\n(function (window, angular) {\n    'use strict';\n\n    // Constants module\n    angular.module('constants', []) \n      .constant('jQuery', window.$)\n      .constant('urls', {\n        'authApi': 'http://auth.qa.clbr.ws'\n      });\n\n    var app = angular.module('clbr', [\n      'constants',\n      'ui.router', // for ui routing\n      'ngMaterial', // activate material design\n      'auth-api'\n    ]);\n\n    // Config\n    app.config([\n      '$urlRouterProvider', '$locationProvider', '$stateProvider', '$mdThemingProvider',\n      function ($urlRouterProvider, $locationProvider, $stateProvider, $mdThemingProvider) {\n        // routes\n        $stateProvider\n          .state('clbr', {\n            'abstract': true,\n            template: '<div ui-view></div>'\n          });\n\n        // html5 routing without #\n        $urlRouterProvider.otherwise('/');\n        $locationProvider.html5Mode(true);\n\n        // theme\n        $mdThemingProvider.theme('default')\n          .primaryPalette('grey')\n          .accentPalette('green', {\n            'default': '500',\n            'hue-1': '200',\n            'hue-2': '700',\n            'hue-3': 'A200'\n          });\n      }\n    ]);\n\n    // Main application controller\n    app.controller('ClickberryCtrl', [\n      '$rootScope', 'authService',\n      function ($rootScope, authService) {\n        $rootScope.$on('$stateChangeSuccess', function (event, toState/*, toParams, from, fromParams*/) {\n          if (angular.isDefined(toState.data) && angular.isDefined(toState.data.pageTitle)) {\n            $rootScope.pageTitle = toState.data.pageTitle;\n          }\n        });\n\n        $rootScope.menuExpanded = false;\n        $rootScope.expandMenu = function() {\n          $rootScope.menuExpanded = !$rootScope.menuExpanded;\n        }\n\n        $rootScope.test = function () {\n          authService.facebook();\n        };\n      }\n    ]);\n\n})(window, window.angular);"],"sourceRoot":"/source/"}